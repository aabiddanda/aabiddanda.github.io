<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="theme-color" content="#2ecc71">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">





<title>Quick Terminal Statistics | Arjun Biddanda</title>





<meta name="description" content="Summary Statistics without leaving the Terminal">


<meta name="keywords" content="terminal, statistics, awk, mawk">



<link rel="stylesheet" href="/css/main.css">









<link rel="canonical" href="http://aabiddanda.github.io/programming/2015/quick-stats/">
<link rel="alternate" type="application/rss+xml" title="Arjun Biddanda" href="http://aabiddanda.github.io/feed.xml" />


<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', '']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

<script>base_url = "";</script>

    <link rel="icon" 
      type="image/png" 
      href="/images/author.png" />
  </head>
  <body class="">

    <main class="main-container">

        <header class="site-header">
  
  <div class="container txt-center">
    <a href="#" class="nav-toogle js-menu-trigger sliding-panel-button">
      <span></span>
      <span></span>
      <span></span>
    </a>

    <nav class="js-menu sliding-panel-content">
      <ul>
        <li><a href="/">home</a></li>
        <li><a href="/about">about</a></li>
        <li><a href="/publications">publications</a></li>
        <li><a href="/contact">contact</a></li>
      </ul>
    </nav>
    <div class="js-menu-screen sliding-panel-fade-screen"></div>

    <a href="/" class="author-thumb dot">
      <img src="/images/author.png" alt="Author thumbnail" class="dot">
    </a>

    
      <h1 class="post-title">Quick Terminal Statistics</h1>
      <p class="post-meta">Dec 28, 2015</p>
    

  </div>

</header>


        <section class="main-content">
          <head>
	<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
</head>

<article class="post">

  <div class="post-content container">
    <p>Since I do computational research, I spend a great deal of my day at the command-line. It tends to be slightly annoying when I have to go into R or python and read in a file just to get a summary of a single column of data to make sure that something is not wrong with the analyses. I like to err on the cautious side and check the data that I am working with fairly frequently.</p>

<p>I wrote two versions of a function to get summary statistics on a particular column of data (really simple ones), one using R and one using <a href="&quot;http://invisible-island.net/mawk/&quot;">mawk</a>. <a href="&quot;http://invisible-island.net/mawk/&quot;">Mawk</a> is a variant on the ever-popular awk command-line utility that has been optimized for a subset of awk commands and is noticeably faster in most cases.</p>

<p>Using R:</p>

<noscript><pre>404: Not Found
</pre></noscript>
<script src="https://gist.github.com/abiddanda/c4ecc4ce9b995aee3b5c.js?file=rsummary.sh"> </script>

<p><em>Note : Yes, <code class="highlighter-rouge">--slave</code> is a real flag for R</em></p>

<p>Using mawk :</p>
<noscript><pre>404: Not Found
</pre></noscript>
<script src="https://gist.github.com/abiddanda/c4ecc4ce9b995aee3b5c.js?file=mawkstats.sh"> </script>

<p>For a comparison of the methods, I ran both functions on a 231 MB file representing phased genotypes from Chromosome 22 of the <a href="http://www.1000genomes.org/">1000 Genomes Consortium</a> Phase 3 data. I used the functions <code class="highlighter-rouge">rsummary</code> and <code class="highlighter-rouge">mawk_stats</code> to calculate summary statistics of the phenotype across individuals, which I simulated using R.</p>

<p>The comparison of the two functions (along with a version of <code class="highlighter-rouge">mawk_stats</code> that uses awk) can be shown by the below screenshot.</p>

<p><img src="/images/blog_images/quick_stats_comparison2.png" alt="StatComparison" /></p>

<p>It is clear that using <code class="highlighter-rouge">awk</code> gains us a little speed over the version in R, but that could be attributable to the fact that we do not compute the median or quartiles. However, when we move to using <code class="highlighter-rouge">mawk</code> we see a huge speedup (2 seconds vs. 19 seconds).</p>

<p>An epilogue to this brief adventure is that while the version of <code class="highlighter-rouge">mawk_stats</code> is quite a bit faster than the R counterpart, it is missing some crucial information. Future directions would be to implement <a href="https://en.wikipedia.org/wiki/Quickselect">Hoareâ€™s Selection Algorithm</a> using mawk to get the median efficiently and then calculate the quartiles as well. Recursion in (m)awk is a little bit tricky and I will likely devote an entire note to this implementation in the (somewhat) near future.</p>

  </div>

  
  <hr>

  <aside id="comments" class="disqus">

    <div class="container">
      <h3><i class="icon icon-comments-o"></i> Comments</h3>
      <div id="disqus_thread"></div>

      <script type="text/javascript">
        var disqus_shortname = 'arjunbiddanda';
        var disqus_identifier = '/programming/2015/quick-stats';
        var disqus_title = 'Quick Terminal Statistics';
        var disqus_url = 'http://aabiddanda.github.io';
        /*var disqus_developer = 1;*/

        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>

      <noscript>
        Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
      </noscript>
    </div>

  </aside>


</article>

        </section>

        
<div class="clearfix"></div>

<footer class="site-footer txt-center">
  <hr>

  <ul class="social">
    
  </ul>

  <small>&copy; 2016 All rights reserved. Made with <a href="http://jekyllrb.com" target="_blank">Jekyll</a> 
  <small>

</footer>


    </main>

    <script src="/js/jquery.min.js"></script>
    <script src="/js/jekyll-search.min.js"></script>
    <script src="/js/main.js"></script>
  </body>
</html>
