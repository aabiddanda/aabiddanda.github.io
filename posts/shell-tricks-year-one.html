<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Arjun Biddanda | Shell Tricks (Grad School Year 1)</title>
  <meta name="description" content="cool shell functions for productivity">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:title" content="Shell Tricks (Grad School Year 1)">
  <meta property="og:type" content="website">
  <meta property="og:url" content="/posts/shell-tricks-year-one">
  <meta property="og:description" content="cool shell functions for productivity">
  <meta property="og:site_name" content="Arjun Biddanda">
  <meta property="og:image" content="/assets/og-image.jpg">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:url" content="/posts/shell-tricks-year-one">
  <meta name="twitter:title" content="Shell Tricks (Grad School Year 1)">
  <meta name="twitter:description" content="cool shell functions for productivity">
  <meta name="twitter:image" content="/assets/og-image.jpg">

  <link rel="apple-touch-icon" href="/assets/apple-touch-icon.png">
  <link href="feed.xml" type="application/rss+xml" rel="alternate" title="Arjun Biddanda Last 10 blog posts" />

  
    <link type="text/css" rel="stylesheet" href="/assets/light.css">
  
</head>

<script type="text/javascript"
    src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<body>
  <main role="main">
    <div class="grid grid-centered">
      <div class="grid-cell">
        <nav class="header-nav reveal">
  <a href="/" class="header-logo" title="Arjun Biddanda">Arjun Biddanda</a>
  <ul class="header-links">
    <li>
      <a href="/publications" title="Publications">
        <span class="icon icon-ios-paper"></span>
      </a>
    </li>
    
    <li>
      <a href="/aabiddanda_cv2016.pdf" target="_blank" title="Curriculum Vitae">
        <span class="icon icon-university"></span>
      </a>
    </li>
    
    <li>
      <a href="/blog" title="Blog">
        <span class="icon icon-ios-book"></span>
      </a>
    </li>
    
      <li>
        <a href="http://twitter.com/aabiddanda" target="_blank" title="Twitter">
          <span class="icon icon-social-twitter"></span>
        </a>
      </li>
    
    
      <li>
        <a href="http://github.com/aabiddanda" target="_blank" title="GitHub">
          <span class="icon icon-social-github"></span>
        </a>
      </li>
    


    
  </ul>
</nav>

        <article class="article reveal">
          <header class="article-header">
            <h1>Shell Tricks (Grad School Year 1)</h1>
            <p>cool shell functions for productivity</p>
            <div class="article-list-footer">
              <span class="article-list-date">
                April 5, 2017
              </span>
              <span class="article-list-divider">-</span>
              <span class="article-list-minutes">
                
                
                  4 minute read
                
              </span>
              <span class="article-list-divider">-</span>
              <div class="article-list-tags">
                
                  <a href="/tag/bash">bash</a>
                
                  <a href="/tag/shell">shell</a>
                
              </div>
            </div>
          </header>

          <div class="article-content">
            <p>Whenever you find yourself having to do something multiple times (e.g. copy a bunch of files at once) it is useful to have some shortcuts in the shell to be able to do a lot of these operations quickly. Here are a couple of my favorite little functions over the course of my first year in grad school that have helped me out.</p>

<h3 id="compression-routines">Compression Routines</h3>

<p>In order to maintain some level of computer organization and directory structure it is useful to be able to identify which projects are “stalled” and are not actively being worked on. In addition, there are some directories that may contain long-term resources such as course notes or planning materials that you access very infrequently. If you have many of these directories (like me) it can quickly bloat your system or Dropbox. Here are couple of easy functions to help you compress those directories and save a bit of space in the process.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="c">#Usage: targz &lt;directory&gt;</span>
targz <span class="o">(){</span>
	<span class="nv">dir</span><span class="o">=</span><span class="k">${</span><span class="nv">1</span><span class="p">%/</span><span class="k">}</span>
	tar -zcvf <span class="k">${</span><span class="nv">dir</span><span class="k">}</span>.tar.gz <span class="nv">$dir</span>
<span class="o">}</span>

<span class="nb">alias </span><span class="nv">untar</span><span class="o">=</span><span class="s1">'tar -xvf'</span>
</code></pre>
</div>

<p>You could always use different flags for <code class="highlighter-rouge">tar</code> if you need to, but the vanilla version above gets you pretty far in having a nice function to compress those pesky directories that take up a lot of space and are not really doing a whole lot.</p>

<p>I also like to have photos from my travels stored on my Dropbox, but with the quality of modern smartphone cameras the photos quickly take up more and more space (~2 Mb per picture!). I was wondering how to compress these images (<code class="highlighter-rouge">*.jpg</code> in particular) and stumbled upon the tool <code class="highlighter-rouge">jpgoptim</code>, which you can install using <code class="highlighter-rouge">brew</code>.  I’ve really been enjoying this tool for making my photo albums more manageable.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="c">#Usage : jpgzip &lt;pct compressed&gt;</span>
jpgzip <span class="o">(){</span>
  <span class="nv">RATIO</span><span class="o">=</span><span class="nv">$1</span>
  jpegoptim -m<span class="k">${</span><span class="nv">RATIO</span><span class="k">}</span> <span class="k">*</span>.jpg
<span class="o">}</span>
</code></pre>
</div>

<p>Note that the compression that is used on the images here is “lossy” so the quality of the images is reduced to whatever percentage you want. With the “lossless” compression option of <code class="highlighter-rouge">jpgoptim</code> you roughly get compression ratios of &lt; 5% but with the lossy version (depending on the parameter) you can get much much higher ratios. I find this particularly useful to compress my pictures in my Dropbox folders so it occupies a little less space on my laptop.</p>

<h3 id="system-checks">System Checks</h3>

<p>Having a macbook pro, sometimes plugging in <code class="highlighter-rouge">htop</code> is nice to be able to check the system and processes that are going on. However there are a couple of things that are generally nice to check, but are a little more elusive. The first is to be able to check your internet speed from within the terminal. You can use the function below to check it (it downloads an 10Mb file to <code class="highlighter-rouge">/dev/null</code>):</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="nb">alias </span><span class="nv">speedtest</span><span class="o">=</span><span class="s1">'curl -o /dev/null http://speedtest.sea01.softlayer.com/downloads/test10.zip'</span>
</code></pre>
</div>

<p>One other thing that I have found nice from time to time is to check the battery health of my laptop (how many charge cycles it has gone through). This is a good indicator of <a href="https://support.apple.com/en-us/HT201585" target="_blank">how long a laptop will last</a></p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="nb">alias </span><span class="nv">chkbat</span><span class="o">=</span><span class="s1">'system_profiler SPPowerDataType | grep "Cycle Count"'</span>
</code></pre>
</div>
<p>Note that the above is only for Mac OS X (10.11), but I imagine there should be some linux and windows analogs of this function.</p>

<h3 id="setting-up-projects-and-scripts">Setting up Projects and Scripts</h3>

<p>One thing that I find myself doing fairly often is setting up directories for projects so that I have a couple of standard directories. This helps me avoid thinking too much about the initial directory structure and that way I can focus on writing the scripts and pipelines that I need to write.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="c"># Usage : setupproject &lt;project_name&gt;</span>
setupproject<span class="o">(){</span>
	mkdir <span class="nv">$1</span>
	touch <span class="nv">$1</span>/README.md
	<span class="nb">echo</span> -e <span class="s2">"</span><span class="nv">$1</span><span class="se">\n</span><span class="s2">-------------------------------"</span> &gt; <span class="nv">$1</span>/README.md
	mkdir <span class="nv">$1</span>/data
	mkdir <span class="nv">$1</span>/src
	mkdir <span class="nv">$1</span>/plots
	mkdir <span class="nv">$1</span>/doc
<span class="o">}</span>
</code></pre>
</div>

<p>Another thing that has helped is having a template from which to setup my python scripts, so that they all roughly follow the same general recipe using <code class="highlighter-rouge">argparse</code> and so that I don’t deviate from my own internal style guide. To see the template file please see <a href="https://gist.github.com/aabiddanda/d32a75e8f14b0e471ceb6ff3c625ef1b">here</a></p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="c"># Sets up a canonical python script from a template</span>
setuppy<span class="o">(){</span>
	cp ~/.pytemplate <span class="nv">$1</span>
<span class="o">}</span>
</code></pre>
</div>

<p>Having some of these basic “setup” functions enables you to have some organization even in those directories where you are testing out initial ideas.</p>

          </div>

          <div class="article-share">
            
            <a href="" title="Share on Twitter" onclick="window.open('https://twitter.com/home?status=Shell Tricks (Grad School Year 1) - /posts/shell-tricks-year-one by @aabiddanda', 'newwindow', 'width=500, height=225'); return false;">
              <span class="icon icon-social-twitter"></span>
            </a>
            <a href="" title="Share on Facebook" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=/posts/shell-tricks-year-one', 'newwindow', 'width=500, height=500'); return false;">
              <span class="icon icon-social-facebook"></span>
            </a>
            <a href="" title="Share on Google+" onclick="window.open('https://plus.google.com/share?url=/posts/shell-tricks-year-one', 'newwindow', 'width=550, height=400'); return false;">
              <span class="icon icon-social-googleplus"></span>
            </a>
          </div>

          
        </article>
        <footer class="footer reveal" align="center">
    <span class="block">Made with ♥ using <a href="http://jekyllrb.com/">Jekyll</a> &amp; <a href="https://github.com/nielsenramon/chalk" title="Chalk">Chalk</a> · &lt;/&gt; on <a href="https://github.com/heiswayi" title="Hosted on GitHub">GitHub</a></span>
</footer>

      </div>
    </div>
  </main>
  <script type="text/javascript" src="/assets/vendor.js"></script>
<script type="text/javascript" src="/assets/application.js"></script>

<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js"></script>
<script>
  WebFont.load({
    google: {
      families: ['Cormorant Garamond:700', 'Lato:300,400,700']
    }
  });
</script>



</body>
</html>
