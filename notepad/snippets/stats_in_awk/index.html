<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"> 
		<title>Stats in Awk</title>
		<meta name="description" content="Stats in Awk" />
		<meta name="keywords" content="stats, awk" />
		<meta name="author" content="Arjun Biddanda" />

		<link href='//fonts.googleapis.com/css?family=Roboto:300,500' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
		<link rel="stylesheet" href="/css/arjun.css">

		<!-- Stylesheet for code in here... -->
		<link rel="stylesheet" href="/highlight/styles/default.css">
		<script src="/highlght/highlight.pack.js"></script>
		<script>hljs.initHighlightingOnLoad();</script>
	</head>

	<body>
		<img class="bg" src="/img/chicago_skyline.jpg">
 	 	<div class="content" align="left">

 	 	<!-- TODO : make sure the snippet is highlighted correctly -->
	 	 	<div id="snippet">
		 	 	<pre><code class="hljs bash">
		 	 	<span class="hljs-shebang">#!/bin/bash </span>
		 	 	<span class="hljs-comment">-------------</span>
		 	 	<span class="hljs-comment"># Usage : stats_awk &lt;filename&gt; &lt;column number&gt; </span>
		 	 	<span class="hljs-function">
		 	 	<span class="hljs-title">stats_awk</span> (){
		 	 	</span>
		 	 		file=<span class="hljs-variable">$1</span>
		 	 		col=<span class="hljs-variable">$2</span>

					mean=$( awk -v c=$col '{sum+=$c} END {print sum / NR "\t" NR}' $file )
					n=$( echo <span class="hljs-variable">$mean</span> | awk '{print $2}' )
					mean=$( echo <span class="hljs-variable">$mean</span> | awk '{print $1}' )
					var=$( awk -v c=$col -v a=$avg '{sum+=($c-a)**2} END {print sum / (NR-1)}' $file )

					<span class="hljs-built-in">echo -e</span> <span class="hljs-string">"MEAN\tVAR\tN"</span>
					<span class="hljs-built-in">echo -e</span> <span class="hljs-string">"<span class="hljs-variable">$mean</span>\t<span class="hljs-variable">$var</span>\t<span class="hljs-variable">$n</span>"</span> 
		 	 	}
		 	 	</code></pre>
	 	 	</div>

	 	 	</br>
	 	 	<!-- TODO : make description better -->
	 	 	<ps>
	 	 	<strong> Simple Statistics in awk</strong></br> 
	 	 	Reading a large data table into R can take an agonizingly long time. Often times we are also just interested in the data in one particular column. The function above computes the mean and variance of a particular column using awk. I plan to post later on some more complicated stats that can be computed using awk. A more high-performance version of awk is <strong> <a href="http://invisible-island.net/mawk/">mawk</a></strong>, but it only captures a subset of the functionality that awk has. For datatables that are very large (~30-100 MB), the difference between awk and mawk is made apparent.  

	 	 	An excellent related post on awk and its particular uses in a bioinfomatics environment can be found <strong><a href="http://williamslab.bscb.cornell.edu/?page_id=235">here</a></strong>

		</div>

		<div class="credit">
		  <ul>
		    <li><a href="/" title="About"><i class="fa fa-info-circle fa-2x"></i></br> About </a></li>	
		    <li><a href="mailto:abiddanda@uchicago.edu" title="Email"><i class="fa fa-envelope fa-2x"></i></br> Email </a></li>
		    <li><a href="arjun_biddanda_cv2014.pdf" title="CV"><i class="fa fa-book fa-2x"></i> </br> CV </a></li>
		    <li><a href="http://github.com/arjunbiddanda" title="Github"><i class="fa fa-github fa-2x"></i></br> Github </a></li>
	 			<li><a href="http://twitter.com/arjunbiddanda" title="Twitter" ><i class="fa fa-twitter fa-2x"></i></br> Twitter </a></li>
	 			<li><a href="notepad.html" title="Notepad"> <i class="fa fa-newspaper-o fa-2x"></i></br> Notepad </a></li>
  		</ul>
		</div>

	</body>
</html>
